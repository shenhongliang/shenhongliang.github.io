<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style>
	div{ display: none; }
	@-webkit-keyframes shake{
		0%{
			-webkit-transform:rotate(0);
		}
		25%{
			-webkit-transform:rotate(10deg);
		}
		50%{
			-webkit-transform:rotate(0);
		}
		75%{
			-webkit-transform:rotate(-10deg);
		}
		100%{
			-webkit-transform:rotate(0);
		}
	}

	.box{ display: block; width:300px; height:300px; background:red; margin:100px auto;}
	
	.shake{ -webkit-animation:shake 0.3s linear 3;}
</style>
<script>
	if(window.DeviceMotionEvent){
		//alert('支持重力感应');
		
		var lastX=0;
		var lastY=0;
		var lastZ=0;
		
		//当重力感应发生变化的时候
		window.addEventListener('devicemotion',function(ev){
			
			//重力感应加速度运动的值
			var acc=ev.accelerationIncludingGravity;
			
			//acc.x
			//acc.y
			//acc.z
			
			if(Math.abs(acc.x-lastX)>20 || Math.abs(acc.y-lastY)>20 || Math.abs(acc.z-lastZ)>20){
				var oDiv=document.querySelector('div');
				oDiv.classList.add('shake');
				//运动完毕时
				oDiv.addEventListener('webkitAnimationEnd',function(){
					oDiv.classList.remove('shake');
				},false);
			}
			lastX=acc.x;
			lastY=acc.y;
			lastZ=acc.z;
		},false);
			
	}else{
		alert('不支持重力感应');	
	}
	</script>
</head>

<body>
	<div class="box"></div>
</body>
</html>
